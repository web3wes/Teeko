(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[73],{61684:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return R}});var n=r(809),s=r.n(n),a=r(92447),l=r(85893),c=r(74047),i=r(52700),o=r(8127),u=r(44102),d=r(20775),p=r(67294),f=r(1300),h=r(48237),v=r(27904),m=r(62151),Z=r(68251),x=r(4706),g=r(26265),w=r(3542);function y(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.Z)(e);if(t){var s=(0,d.Z)(this).constructor;r=Reflect.construct(n,arguments,s)}else r=n.apply(this,arguments);return(0,u.Z)(this,r)}}var b=function(e){(0,o.Z)(r,e);var t=y(r);function r(){var e;(0,c.Z)(this,r);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return e=t.call.apply(t,[this].concat(l)),(0,g.Z)((0,x.Z)(e),"onApprove",(0,a.Z)(s().mark((function t(){var r,n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=(0,Z.Z)(e.props.address),t.next=3,w.Z.eth.getAccounts();case 3:return n=t.sent,t.next=6,r.methods.approveRequest(e.props.id).send({from:n[0]});case 6:case"end":return t.stop()}}),t)})))),(0,g.Z)((0,x.Z)(e),"onFinalize",(0,a.Z)(s().mark((function t(){var r,n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=(0,Z.Z)(e.props.address),t.next=3,w.Z.eth.getAccounts();case 3:return n=t.sent,t.next=6,r.methods.finalizeRequest(e.props.id).send({from:n[0]});case 6:case"end":return t.stop()}}),t)})))),e}return(0,i.Z)(r,[{key:"render",value:function(){var e=f.Z.Row,t=f.Z.Cell,r=this.props,n=r.id,s=r.request,a=r.approversCount,c=s.approvalCount>a/2;return(0,l.jsxs)(e,{disabled:s.complete,positive:c&&!s.complete,children:[(0,l.jsx)(t,{children:n}),(0,l.jsx)(t,{children:s.description}),(0,l.jsx)(t,{children:w.Z.utils.fromWei(s.value,"ether")}),(0,l.jsx)(t,{children:s.recipient}),(0,l.jsxs)(t,{children:[s.approvalCount,"/",a]}),(0,l.jsx)(t,{children:s.complete?null:(0,l.jsx)(h.Z,{color:"green",basic:!0,onClick:this.onApprove,children:"Approve"})}),(0,l.jsx)(t,{children:s.complete?null:(0,l.jsx)(h.Z,{color:"teal",basic:!0,onClick:this.onFinalize,children:"Finalize"})})]})}}]),r}(p.Component);function j(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.Z)(e);if(t){var s=(0,d.Z)(this).constructor;r=Reflect.construct(n,arguments,s)}else r=n.apply(this,arguments);return(0,u.Z)(this,r)}}var R=function(e){(0,o.Z)(r,e);var t=j(r);function r(){return(0,c.Z)(this,r),t.apply(this,arguments)}return(0,i.Z)(r,[{key:"renderRows",value:function(){var e=this;return this.props.requests.map((function(t,r){return(0,l.jsx)(b,{id:r,request:t,address:e.props.address,approversCount:e.props.approversCount},r)}))}},{key:"render",value:function(){var e=f.Z.Header,t=f.Z.Row,r=f.Z.HeaderCell,n=f.Z.Body;return(0,l.jsxs)(m.Z,{children:[(0,l.jsx)("h3",{children:"Requests"}),(0,l.jsx)(v.Link,{route:"/campaigns/".concat(this.props.address,"/requests/new"),children:(0,l.jsx)("a",{children:(0,l.jsx)(h.Z,{primary:!0,floated:"right",style:{marginBottom:10},children:"Add Request"})})}),(0,l.jsxs)(f.Z,{children:[(0,l.jsx)(e,{children:(0,l.jsxs)(t,{children:[(0,l.jsx)(r,{children:"ID"}),(0,l.jsx)(r,{children:"Description"}),(0,l.jsx)(r,{children:"Amount"}),(0,l.jsx)(r,{children:"Recipient"}),(0,l.jsx)(r,{children:"Approval Count"}),(0,l.jsx)(r,{children:"Approve"}),(0,l.jsx)(r,{children:"Finalize"})]})}),(0,l.jsx)(n,{children:this.renderRows()})]}),(0,l.jsxs)("div",{children:["Found ",this.props.requestCount," requests."]}),(0,l.jsx)("div",{children:"Test"})]})}}],[{key:"getInitialProps",value:function(){var e=(0,a.Z)(s().mark((function e(t){var r,n,a,l,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.query.address,n=(0,Z.Z)(r),e.next=4,n.methods.getRequestsCount().call();case 4:return a=e.sent,e.next=7,n.methods.approversCount().call();case 7:return l=e.sent,e.next=10,Promise.all(Array(parseInt(a)).fill().map((function(e,t){return n.methods.requests(t).call()})));case 10:return c=e.sent,e.abrupt("return",{address:r,requests:c,requestCount:a,approversCount:l});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),r}(p.Component)},19553:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/campaigns/requests",function(){return r(61684)}])},1300:function(e,t,r){"use strict";r.d(t,{Z:function(){return k}});var n=r(22122),s=r(36744),a=r(86010),l=(r(45697),r(67294)),c=r(92063),i=r(28935),o=r(12519),u=r(92248);function d(e){var t=e.children,r=e.className,s=(0,a.default)(r),c=(0,i.Z)(d,e),u=(0,o.Z)(d,e);return l.createElement(u,(0,n.Z)({},c,{className:s}),t)}d.handledProps=["as","children","className"],d.defaultProps={as:"tbody"},d.propTypes={};var p=d,f=r(17186),h=r(65382);function v(e){var t=e.active,r=e.children,s=e.className,d=e.collapsing,p=e.content,f=e.disabled,m=e.error,Z=e.icon,x=e.negative,g=e.positive,w=e.selectable,y=e.singleLine,b=e.textAlign,j=e.verticalAlign,R=e.warning,G=e.width,k=(0,a.default)((0,c.lG)(t,"active"),(0,c.lG)(d,"collapsing"),(0,c.lG)(f,"disabled"),(0,c.lG)(m,"error"),(0,c.lG)(x,"negative"),(0,c.lG)(g,"positive"),(0,c.lG)(w,"selectable"),(0,c.lG)(y,"single line"),(0,c.lG)(R,"warning"),(0,c.X4)(b),(0,c.Ok)(j),(0,c.H0)(G,"wide"),s),A=(0,i.Z)(v,e),N=(0,o.Z)(v,e);return u.kK(r)?l.createElement(N,(0,n.Z)({},A,{className:k}),h.Z.create(Z),p):l.createElement(N,(0,n.Z)({},A,{className:k}),r)}v.handledProps=["active","as","children","className","collapsing","content","disabled","error","icon","negative","positive","selectable","singleLine","textAlign","verticalAlign","warning","width"],v.defaultProps={as:"td"},v.propTypes={},v.create=(0,f.u5)(v,(function(e){return{content:e}}));var m=v;function Z(e){var t=e.children,r=e.className,s=e.content,d=e.fullWidth,p=(0,a.default)((0,c.lG)(d,"full-width"),r),f=(0,i.Z)(Z,e),h=(0,o.Z)(Z,e);return l.createElement(h,(0,n.Z)({},f,{className:p}),u.kK(t)?s:t)}Z.handledProps=["as","children","className","content","fullWidth"],Z.defaultProps={as:"thead"},Z.propTypes={};var x=Z;function g(e){var t=e.as,r=(0,i.Z)(g,e);return l.createElement(x,(0,n.Z)({},r,{as:t}))}g.handledProps=["as"],g.propTypes={},g.defaultProps={as:"tfoot"};var w=g;function y(e){var t=e.as,r=e.className,s=e.sorted,o=(0,a.default)((0,c.cD)(s,"sorted"),r),u=(0,i.Z)(y,e);return l.createElement(m,(0,n.Z)({},u,{as:t,className:o}))}y.handledProps=["as","className","sorted"],y.propTypes={},y.defaultProps={as:"th"};var b=y;function j(e){var t=e.active,r=e.cellAs,d=e.cells,p=e.children,f=e.className,h=e.disabled,v=e.error,Z=e.negative,x=e.positive,g=e.textAlign,w=e.verticalAlign,y=e.warning,b=(0,a.default)((0,c.lG)(t,"active"),(0,c.lG)(h,"disabled"),(0,c.lG)(v,"error"),(0,c.lG)(Z,"negative"),(0,c.lG)(x,"positive"),(0,c.lG)(y,"warning"),(0,c.X4)(g),(0,c.Ok)(w),f),R=(0,i.Z)(j,e),G=(0,o.Z)(j,e);return u.kK(p)?l.createElement(G,(0,n.Z)({},R,{className:b}),(0,s.Z)(d,(function(e){return m.create(e,{defaultProps:{as:r}})}))):l.createElement(G,(0,n.Z)({},R,{className:b}),p)}j.handledProps=["active","as","cellAs","cells","children","className","disabled","error","negative","positive","textAlign","verticalAlign","warning"],j.defaultProps={as:"tr",cellAs:"td"},j.propTypes={},j.create=(0,f.u5)(j,(function(e){return{cells:e}}));var R=j;function G(e){var t=e.attached,r=e.basic,d=e.celled,f=e.children,h=e.className,v=e.collapsing,m=e.color,Z=e.columns,g=e.compact,y=e.definition,b=e.fixed,j=e.footerRow,k=e.headerRow,A=e.headerRows,N=e.inverted,P=e.padded,C=e.renderBodyRow,E=e.selectable,q=e.singleLine,_=e.size,T=e.sortable,D=e.stackable,z=e.striped,F=e.structured,H=e.tableData,B=e.textAlign,L=e.unstackable,O=e.verticalAlign,X=(0,a.default)("ui",m,_,(0,c.lG)(d,"celled"),(0,c.lG)(v,"collapsing"),(0,c.lG)(y,"definition"),(0,c.lG)(b,"fixed"),(0,c.lG)(N,"inverted"),(0,c.lG)(E,"selectable"),(0,c.lG)(q,"single line"),(0,c.lG)(T,"sortable"),(0,c.lG)(D,"stackable"),(0,c.lG)(z,"striped"),(0,c.lG)(F,"structured"),(0,c.lG)(L,"unstackable"),(0,c.sU)(t,"attached"),(0,c.sU)(r,"basic"),(0,c.sU)(g,"compact"),(0,c.sU)(P,"padded"),(0,c.X4)(B),(0,c.Ok)(O),(0,c.H0)(Z,"column"),"table",h),K=(0,i.Z)(G,e),U=(0,o.Z)(G,e);if(!u.kK(f))return l.createElement(U,(0,n.Z)({},K,{className:X}),f);var I={defaultProps:{cellAs:"th"}},W=(k||A)&&l.createElement(x,null,R.create(k,I),(0,s.Z)(A,(function(e){return R.create(e,I)})));return l.createElement(U,(0,n.Z)({},K,{className:X}),W,l.createElement(p,null,C&&(0,s.Z)(H,(function(e,t){return R.create(C(e,t))}))),j&&l.createElement(w,null,R.create(j)))}G.handledProps=["as","attached","basic","celled","children","className","collapsing","color","columns","compact","definition","fixed","footerRow","headerRow","headerRows","inverted","padded","renderBodyRow","selectable","singleLine","size","sortable","stackable","striped","structured","tableData","textAlign","unstackable","verticalAlign"],G.defaultProps={as:"table"},G.propTypes={},G.Body=p,G.Cell=m,G.Footer=w,G.Header=x,G.HeaderCell=b,G.Row=R;var k=G}},function(e){e.O(0,[774,482,351,959,831,876,888,179],(function(){return t=19553,e(e.s=t);var t}));var t=e.O();_N_E=t}]);